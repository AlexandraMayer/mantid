#ifndef MANTIDQTCUSTOMINTERFACES_MWDIAG_H_
#define MANTIDQTCUSTOMINTERFACES_MWDIAG_H_

#include "MantidQtMantidWidgets/ui_MWDiag.h"
#include "MantidQtMantidWidgets/DiagResults.h"
#include "WidgetDllOption.h"
#include <QStringList>

namespace MantidQt
{
  namespace MantidWidgets
  {
    class EXPORT_OPT_MANTIDQT_MANTIDWIDGETS MWDiag : public QWidget
    {
      Q_OBJECT

    public:
      /// there has to be a default constructor but you can call it with a pointer to the thing that will take ownership of it
      MWDiag(QWidget *parent = NULL);
	  bool run();
	  QString getOutputWS() const;
	  signals:
	    void runAsPythonScr(const QString&);
	  
    private:
      /// The form generated by Qt Designer
      Ui::MWDiag m_designWidg;
	  /// check if ==NULL before use, set to point to the results dialog box
      DiagResults *m_dispDialog;
	  /// stores if the contents of the first white beam vanadium box have been filled in by the user or not, if not the contents are open to auto-fillin
	  bool m_WBVChanged;
      /// the name of the output workspace that contains many of the results from these tests
	  QString m_outputWS;
	  void raiseDialog();

	  // move the following to the widget
	  QString openFileDialog(const bool save, const QStringList &exts);

	  void setDefaults();
	  void setupToolTips();
      void connectSignals(const QWidget * const parentInterface);
	  
	private slots:
	  void browseClicked(const QString &buttonDis);
	  void updateWBV(const QString &WBVSuggestion);
	  void WBVUpd();
	};
  }
}

#endif //MANTIDQTCUSTOMINTERFACES_MWDIAG_H_
