set ( SRC_FILES src/DiagResults.cpp
                src/ICatAdvancedSearch.cpp
                src/ICatInvestigation.cpp
                src/ICatMyDataSearch.cpp
                src/ICatSearch.cpp
                src/ICatUtils.cpp
                src/InstrumentSelector.cpp
                src/MultifitSetupDialog.cpp
                src/MWDiag.cpp
                src/MWRunFiles.cpp
                src/pythonCalc.cpp
                src/RangeSelector.cpp
                src/RenameParDialog.cpp
                src/SaveWorkspaces.cpp
                src/UserFunctionDialog.cpp
                src/WorkspaceSelector.cpp
                src/FitPropertyBrowser.cpp
                src/SequentialFitDialog.cpp
                src/SelectWorkspacesDialog.cpp
                src/PropertyHandler.cpp
)

set ( SRC_UNITY_IGNORE_FILES src/ICatAdvancedSearch.cpp
      src/ICatSearch.cpp
)

# Include files aren't required, but this makes them appear in Visual Studio
set ( INC_FILES inc/MantidQtMantidWidgets/DiagResults.h
                inc/MantidQtMantidWidgets/ICatAdvancedSearch.h
                inc/MantidQtMantidWidgets/ICatInvestigation.h
                inc/MantidQtMantidWidgets/ICatMyDataSearch.h
                inc/MantidQtMantidWidgets/ICatSearch.h
                inc/MantidQtMantidWidgets/ICatUtils.h
                inc/MantidQtMantidWidgets/InstrumentSelector.h
                inc/MantidQtMantidWidgets/MultifitSetupDialog.h
                inc/MantidQtMantidWidgets/MWDiag.h
                inc/MantidQtMantidWidgets/MWRunFiles.h
                inc/MantidQtMantidWidgets/pythonCalc.h
                inc/MantidQtMantidWidgets/RangeSelector.h
                inc/MantidQtMantidWidgets/RenameParDialog.h
                inc/MantidQtMantidWidgets/SaveWorkspaces.h
                inc/MantidQtMantidWidgets/UserFunctionDialog.h
                inc/MantidQtMantidWidgets/WidgetDllOption.h
                inc/MantidQtMantidWidgets/WorkspaceSelector.h
                inc/MantidQtMantidWidgets/FitPropertyBrowser.h
                inc/MantidQtMantidWidgets/SequentialFitDialog.h
                inc/MantidQtMantidWidgets/SelectWorkspacesDialog.h
                inc/MantidQtMantidWidgets/PropertyHandler.h
)

set ( MOC_FILES inc/MantidQtMantidWidgets/DiagResults.h
                inc/MantidQtMantidWidgets/ICatAdvancedSearch.h
                inc/MantidQtMantidWidgets/ICatInvestigation.h
                inc/MantidQtMantidWidgets/ICatMyDataSearch.h
                inc/MantidQtMantidWidgets/ICatSearch.h
                inc/MantidQtMantidWidgets/ICatUtils.h
                inc/MantidQtMantidWidgets/InstrumentSelector.h
                inc/MantidQtMantidWidgets/MultifitSetupDialog.h
                inc/MantidQtMantidWidgets/MWDiag.h
                inc/MantidQtMantidWidgets/MWRunFiles.h
                inc/MantidQtMantidWidgets/pythonCalc.h
                inc/MantidQtMantidWidgets/RangeSelector.h
                inc/MantidQtMantidWidgets/RenameParDialog.h
                inc/MantidQtMantidWidgets/SaveWorkspaces.h
                inc/MantidQtMantidWidgets/UserFunctionDialog.h
                inc/MantidQtMantidWidgets/WorkspaceSelector.h
                inc/MantidQtMantidWidgets/FitPropertyBrowser.h
                inc/MantidQtMantidWidgets/SequentialFitDialog.h
                inc/MantidQtMantidWidgets/SelectWorkspacesDialog.h
                inc/MantidQtMantidWidgets/PropertyHandler.h
)

set ( UI_FILES inc/MantidQtMantidWidgets/ICatAdvancedSearch.ui
               inc/MantidQtMantidWidgets/ICatInvestigation.ui
               inc/MantidQtMantidWidgets/ICatMyDataSearch.ui
               inc/MantidQtMantidWidgets/ICatSearch.ui
               inc/MantidQtMantidWidgets/MultifitSetupDialog.ui
               inc/MantidQtMantidWidgets/MWDiag.ui
               inc/MantidQtMantidWidgets/MWRunFiles.ui
               inc/MantidQtMantidWidgets/RenameParDialog.ui
               inc/MantidQtMantidWidgets/UserFunctionDialog.ui
               inc/MantidQtMantidWidgets/SequentialFitDialog.ui
)


include_directories ( inc )
include_directories ( ${QWT_INCLUDE_DIR} )
include_directories ( ../../QtPropertyBrowser/src )

qt4_wrap_cpp ( MOCCED_FILES ${MOC_FILES} )


set ( ALL_SRC ${SRC_FILES} ${MOCCED_FILES} )
# Use a precompiled header where they are supported
ADD_PRECOMPILED_HEADER( inc/MantidQtMantidWidgets/PrecompiledHeader.h MantidQtMantidWidgets MantidWidgets ALL_SRC INC_FILES )

qt4_wrap_ui ( UI_HDRS ${UI_FILES} ) 
include_directories ( ${CMAKE_CURRENT_BINARY_DIR} )

# For Windows:
add_definitions ( -DIN_MANTIDQT_MANTIDWIDGETS )

add_library ( MantidWidgets ${ALL_SRC} ${INC_FILES} ${UI_HDRS} )

target_link_libraries ( MantidWidgets MantidQtAPI QtPropertyBrowser ${QT_LIBRARIES} ${QWT_LIBRARIES} )

###########################################################################
# Installation settings
###########################################################################

install ( TARGETS MantidWidgets DESTINATION ${LIB_DIR} )
