#For MantidDataHandling

import os
import MantidBuild

#GET LIST OF CPPS files
codeFolder = os.path.abspath('./src')
listCpps = MantidBuild.getCPPFiles(codeFolder) 
listCpps = listCpps + MantidBuild.getCPPFiles(codeFolder + '/LoadRaw')
listCpps = listCpps + MantidBuild.getCPPFiles(codeFolder + '/NeXusUtils')
listCpps = listCpps + MantidBuild.getCPPFiles(codeFolder + '/LoadDAE')

#Import environment
Import('env')
myenv = env.Clone()
myenv.Append(CPPDEFINES=[('IN_MANTID_DATA_HANDLING',1)])
listSharedObjects = MantidBuild.getSharedObjects(listCpps, myenv)

#BUILD CODE
shared = myenv.SharedLibrary('lib/MantidDataHandling', listCpps, LIBS=env['MYLIBLIST'], LIBPATH=env['MYLIBDIRLIST'], PDB='lib/MantidDataHandling.pdb')
retval = { 'shared': shared, 'sharedobjs' : listSharedObjects, 'libs': ['MantidDataHandling'] }
Return('retval')
