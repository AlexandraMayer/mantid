digraph CreateTransmissionWorkspaceWavelength {
label = ""
rankdir = TB;

$global_style

subgraph params {
 $param_style
  inputWS             [label="TransmissionRun"]
  procCommands        [label="ProcessingCommands"]
  wavMin              [label="WavelengthMin", group=gwav]
  wavMax              [label="WavelengthMax", group=gwav]
  monitorIndex        [label="I0MonitorIndex"]
  monIntWavMax        [label="MonitorIntegration-\nWavelengthMax"]
  monIntWavMin        [label="MonitorIntegration-\nWavelengthMin"]
  monBackWavMin       [label="MonitorBackground-\nWavelengthMin"]
  monBackWavMax       [label="MonitorBackground-\nWavelengthMax"]
}

subgraph decisions {
 $decision_style
}

subgraph algorithms {
 $algorithm_style
  convertWav    [label="ConvertUnits\n(AlignBins = True)", group=g1]
  cropWav       [label="CropWorkspace", group=g1]
  groupDet      [label="GroupDetectors"]
  cropMonWS     [label="CropWorkspace", group=g11]
  calcFlatBg    [label="CalculateFlatBackground", group=g11]
  intMon        [label="Integration", group=g11]
  divideDetMon  [label="Divide\n(Detectors / Monitors)", group=g1]
}

subgraph processes {
 $process_style
}

subgraph values {
 $value_style
  valWav        [label="I(&lambda;)", group=g1]
  valWavOut     [label="I(&lambda;)", group=g1]
}

inputWS             -> convertWav
wavMin              -> cropWav
convertWav          -> cropWav
wavMax              -> cropWav
cropWav             -> valWav
valWav              -> groupDet       [label="Detectors"]
procCommands        -> groupDet

valWav              -> cropMonWS      [label="Monitors"]
monitorIndex        -> cropMonWS
cropMonWS           -> calcFlatBg
monBackWavMin       -> calcFlatBg
monBackWavMax       -> calcFlatBg
calcFlatBg          -> intMon
monIntWavMin        -> intMon
monIntWavMax        -> intMon

groupDet        -> divideDetMon
intMon              -> divideDetMon
divideDetMon        -> valWavOut

wavMax -> monBackWavMax [style=invis]

{rank=same; monIntWavMin; monIntWavMax}
{rank=same; monBackWavMin; monBackWavMax}
}
