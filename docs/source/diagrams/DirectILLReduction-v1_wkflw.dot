digraph DirectILLReduction {
  label = "DirectILLReduction workflow diagram"
  $global_style

  subgraph params {
    $param_style
    inputVana [label="IntegratedVanadiumWorkspace"]
    inputWS [label="InputWorkspace"]
    outputWS [label="OutputWorkspace"]
    outputOptionalWS [label="OutputSofThetaEnergyWorkspace"]
    qBinParams [label="q rebinning settings"]
    wRebinParams [label="Energy rebinning settings"]
  }

  subgraph decisions {
    $decision_style
  }

  subgraph algorithms {
    $algorithm_style
    ConvertToEnergy [label="Convert TOF to energy transfer"]
    CorrectKiKf [label="CorrectKiKf"]
    DetectorEfficiency [label="DetectorEfficiencyCorUser"]
    GroupDetectors [label="GroupDetectors"]
    Normalize [label="Divide"]
    Rebin [label="Rebin in energy"]
    SofQW [label="SofQWNormalisedPolygon"]
  }

  subgraph values {
  $value_style
  }

  inputVana -> Normalize
  inputWS -> Normalize
  Normalize -> ConvertToEnergy
  ConvertToEnergy -> CorrectKiKf
  CorrectKiKf -> Rebin
  wRebinParams -> Rebin
  Rebin -> DetectorEfficiency
  DetectorEfficiency -> GroupDetectors
  GroupDetectors -> outputOptionalWS
  GroupDetectors -> SofQW
  qBinParams -> SofQW
  SofQW -> outputWS
}
